% clipdata.m: delete all data outside of the axis current x-limits% USAGE: clipdata(ax), where ax is the handle of the desired axis% if no ax is specified the current axis will be used.% NOTE: this is obviously destructive, so you may want to first% save the figure before trying clipdata.% Written by:  Jonathan Jacobs%              June 2018 (last mod: 06/02/18)function clipdata(ax)if nargin==0   ax = gca;endif ~ishandle(ax)   disp('You must click on a figure axis to use "clipdata".')   returnendaxch = ax.Children;xlims = ax.XLim;for i=1:length(axch)   type = axch(i).Type;      if (strcmp(type, 'line') || strcmp(type, 'surface') || strcmp(type, 'patch'))      xdata = axch(i).XData;      ydata = axch(i).YData;	  xlo_ind = find(xdata>=xlims(1));	  if isempty(xlo_ind), xlo_ind=1; end      xhi_ind = find(xdata<=xlims(2));	  if isempty(xhi_ind), xhi_ind=length(xdata); end      	  newxdat = xlo_ind(1):xhi_ind(end);	  axch(i).XData = [];      axch(i).YData = [];      axch(i).XData = xdata(newxdat);      axch(i).YData = ydata(newxdat);   endend