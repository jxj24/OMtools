% dataroot: find or change the root data directory (previously 'setroot.m')% Usage: datapathroot = dataroot(mode)% where mode = 'r' (read), or 'w' (write)% written by:  Jonathan Jacobs%              February 1997 - April 1998  (last mod: 04/14/98)% 21 March 2003: added '/' as sep character for MATLAB 6.5 (OS X, yay!)% 3 March 2017: renamed. now can read or write the data root directoryfunction datarootpath = dataroot(mode)if nargin==0, mode='r';endcurdir=pwd;sep = filesep;% OMroot.txt and dataroot.txt live in omprefs diromprefpath = findomprefs;if ~isempty(omprefpath)   cd(omprefpath)else   disp('Can not find omprefs folder.')   cd(curdir)   returnendswitch mode   case 'r'      % find the root directories for the data files.      datarootfid = fopen( 'dataroot.txt', 'r' );      if datarootfid > 0         datarootpath = char(fread(datarootfid))';         datarootpath=strtok(datarootpath,[10 13]);         if strcmp( datarootpath(end),sep )            datarootpath=datarootpath(1:end-1);         end         fclose(datarootfid);      else         fid=fopen('dataroot.txt','w');         fwrite(fid, matlabroot, 'char');         fclose(fid);         datarootpath = matlabroot;         disp('<<< dataroot.m >>>')         disp('"dataroot.txt" was missing from your OMtools/omprefs folder.')         disp('I have created a new file, initialized to be your home "MATLAB" directory.')         disp('Feel free to modify it by moving to where you want it to be, ')         disp('and calling "dataroot(''w'')".')         disp(' ')      end   case 'w'      datarootfid = fopen( 'dataroot.txt', 'r' );      if datarootfid > 0         fid=fopen('dataroot.txt','w');         fwrite(fid, pwd, 'char');         fclose(fid);         datarootpath = pwd;               end   otherwise      endcd(curdir)